# minify for VS Code

[![Build Status](https://api.travis-ci.org/HookyQR/VSCodeMinify.svg?branch=master)](https://travis-ci.org/HookyQR/VSCodeMinify)

Minify your js, css and html files to save transmit bandwidth. Calls each of the minifiers directly, allowing settings to be passed:
* **JS:** [uglify-js](http://lisperator.net/uglifyjs) v2.7.3
* **CSS:** [clean-css](https://github.com/jakubpawlowicz/clean-css) v3.4.19
* **HTML:** [html-minifier](http://kangax.github.io/html-minifier/) v3.0.3

Run the file minifier with **F1** `Minify`.

Folders containing Javascript and CSS file can be minified to a single file (to `{dirname}.min.[css|js]`) with **F1** `Minify Directory`. It is acceptable to have a single directory minified for both Javascript and CSS.

Optionally runs minify on save when a matching minified file (and/or directory) already exists. Enalbe in your user or workspace settings. The setting defaults are shown below:

```json
"minify.minifyExistingOnSave": false,

"minify.js": {
	"sequences": true,
	"properties": true,
	"dead_code": true,
	"drop_debugger": true,
	"unsafe": false,
	"unsafe_comps": false,
	"conditionals": true,
	"comparisons": true,
	"evaluate": true,
	"booleans": true,
	"loops": true,
	"unused": true,
	"hoist_funs": true,
	"hoist_vars": false,
	"if_return": true,
	"join_vars": true,
	"cascade": true,
	"collapse_vars": false,
	"warnings": true,
	"negate_iife": false,
	"pure_getters": false,
	"pure_funcs": null,
	"drop_console": false,
	"keep_fargs": true,
	"keep_fnames": false,
	"passes": 1,
	"global_defs": {}
},
"minify.css": {
	"advanced": true,
	"aggressiveMerging": true,
	"compatibility": "*",
	"inliner": {},
	"keepBreaks": false,
	"keepSpecialComments": "*",
	"mediaMerging": true,
	"processImport": true,
	"processImportFrom": ["all"],
	"rebase": true,
	"restructuring": true,
	"root": "${workspaceRoot}",
	"roundingPrecision": 2,
	"semanticMerging": false,
	"shorthandCompacting": true
},
"minify.html": {
	"caseSensitive": false,
	"collapseBooleanAttributes": true,
	"collapseWhitespace": true,
	"conservativeCollapse": false,
	"customAttrAssign": [],
	"customAttrCollapse": "",
	"customAttrSurround": [],
	"customEventAttributes": [ "^on[a-z]{3,}$" ],
	"decodeEntities": false,
	"html5": true,
	"ignoreCustomComments": [ "^!" ],
	"ignoreCustomFragments": ["<%[\\s\\S]*?%>", "<\\?[\\s\\S]*?\\?>"],
	"includeAutoGeneratedTags": true,
	"keepClosingSlash": false,
	"maxLineLength": false,
	"minifyCSS": true, //uses minify.css settings if true
	"minifyJS": true, //uses minify.js settings if true
	"minifyURLs": false,
	"preserveLineBreaks": false,
	"preventAttributesEscaping": false,
	"processConditionalComments": false,
	"processScripts": [],
	"quoteCharacter": "\"",
	"removeAttributeQuotes": false,
	"removeComments": false,
	"removeEmptyAttributes": false,
	"removeEmptyElements": false,
	"removeOptionalTags": false,
	"removeRedundantAttributes": false,
	"removeScriptTypeAttributes": false,
	"removeStyleLinkTypeAttributes": false,
	"sortAttributes": false,
	"sortClassName": false,
	"useShortDoctype": false
}
```

`minifiy.css.root` accepts "`${workspaceRoot}`/some/path" to define the internal `@import` absolute root.

Since `html-minifier` also uses `clean-css` and `uglify-js`, setting `minifyJS` or `minifyCSS` to **`true`** will embed the settings you have supplied for those minifiers automatically. You can provide your own settings as an object if you want some different methods to be used.

Like [beautify for VS Code](https://marketplace.visualstudio.com/items/HookyQR.beautify), minify accepts an array for file extension that you will accept minification of under `minify.JSfiles`, `minify.CSSfiles`, and `minify.HTMLfiles`.

## Changes:
### 0.2.4: 18 Sep 2016
* Update dependencies.

### 0.2.3: 12 Aug 2016
* force ignoreCustomFragments existance so html-minifier works.

### 0.2.2: 12 Aug 2016
* Fix dependencies tree failure.

### 0.2.1: 06 Aug 2016
* Update embeded dependencies (clean-css & html-minifier).

### 0.2.0: 13 Feb 2016
* Update embeded dependencies (clean-css & html-minifier).

### 0.1.1: 01 Jan 2016
* Fixed use of and enforcement of defaults.

### 0.1.0: 01 Jan 2016
* Now includes the inner components of minify directly.
* Allow preferences for all three minifiers.
* Allow minifiying whole directories for css and js.


### 0.0.3: 24 Dec 2015
* Removed suborinate module tests from package output
* Added icon

### 0.0.2: 17 Dec 2015
* Remove `json` from valid types.
* Indicate fail on empty file.
* Change report line to percentage.

